<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Assorted functions for processing and modeling the 
  delay discounting data collected as part of the ABCD study.">
<title>Delay Discounting Models for the ABCD study • ddabcd</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Delay Discounting Models for the ABCD study">
<meta property="og:description" content="Assorted functions for processing and modeling the 
  delay discounting data collected as part of the ABCD study.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">ddabcd</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.4</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level2">
<h2 id="functions-for-processing-and-modeling-delay-discounting-data-from-the-abcd-study">Functions for Processing and Modeling Delay Discounting Data From the ABCD Study<a class="anchor" aria-label="anchor" href="#functions-for-processing-and-modeling-delay-discounting-data-from-the-abcd-study"></a>
</h2>
<p>The R package <strong>ddabcd</strong> provides a collection of functions to help researchers extract, clean, and model data from the delay discounting task used in the <a href="https://abcdstudy.org/" class="external-link">Adolescent Brain Cognitive Development (ABCD) Study®</a>.</p>
<div class="section level3">
<h3 id="table-of-contents">Table of contents<a class="anchor" aria-label="anchor" href="#table-of-contents"></a>
</h3>
<ol style="list-style-type: decimal">
<li><a href="#section01">Prerequisites</a></li>
<li><a href="#section02">Installation</a></li>
<li><a href="#section03">The delay discounting task</a></li>
<li><a href="#section04">Usage</a></li>
<li><a href="#REF">References</a></li>
</ol>
</div>
<div class="section level3">
<h3 id="section01">Prerequisites<a class="anchor" aria-label="anchor" href="#section01"></a>
</h3>
<ul>
<li><a href="https://cran.r-project.org/" class="external-link">R (version &gt;= 4.2.1)</a></li>
<li><a href="https://tidyr.tidyverse.org/" class="external-link">tidyr (version &gt;= 1.2.0)</a></li>
<li><a href="https://cran.r-project.org/web/packages/bbmle/index.html" class="external-link">bbmle (version &gt;= 1.0.25)</a></li>
<li>For easy installation it is recommended to have <a href="https://devtools.r-lib.org/" class="external-link">devtools (version &gt;= 2.4.3)</a>
</li>
</ul>
</div>
<div class="section level3">
<h3 id="section02">Installation<a class="anchor" aria-label="anchor" href="#section02"></a>
</h3>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Install development version from Github</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"rettopnivek/ddabcd"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="section03">The delay discounting task<a class="anchor" aria-label="anchor" href="#section03"></a>
</h3>
<p>Details on the delay discounting task used in the ABCD study are provided by <a href="#REF">Luciana et al. (2018)</a>. In brief, the ABCD study assessed delay discounting via a task using an adjusting-delay procedure. On each trial of the task, participants had to chose between two hypothetical rewards: a reward of $100 after a delay or an immediate reward of varying magnitudes. The magnitude of the immediate reward was automatically adjusted between trials on a given block based on a participant’s previous response. Participants completed a total of 42 trials over 7 randomized blocks (with 6 trials per block), where each block corresponded to a different delay interval for the future reward of $100. Delay intervals for the future $100 were: 6 hours, 1 day, 1 week, 1 month, 3 months, 1 year, and 5 years.</p>
<p>At each delay interval, an indifference score was calculated. The indifference score represents how much an $100 reward is worth following a given delay. The indifference score can be thought of as the proportion that an immediate reward is worth following a delay. Indifference scores in the ABCD study varied from 99.21875 to 0.78125.</p>
<p>Participants also completed 3 validity questions in between blocks. Participants chose between $100 now versus $100 following a delay (e.g., 5 years), with the rational choice always being the immediate amount. Failure to pick the rational choice on all 3 questions was taken to indicate inattentive behavior.</p>
</div>
<div class="section level3">
<h3 id="section04">Usage<a class="anchor" aria-label="anchor" href="#section04"></a>
</h3>
<p>After installation the package can be loaded via the standard library call:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rettopnivek.github.io/ddabcd/" class="external-link">ddabcd</a></span><span class="op">)</span></span></code></pre></div>
<p>The package comes with simulated data similar in format to the data provided by the ABCD study. Note that direct access to the ABCD data requires approval from the <a href="https://nda.nih.gov/abcd/" class="external-link">NDA Data Access Committee</a>. See <a href="#REF">Saragosa-Harris et al. (2022)</a> for advice on using data from the ABCD study.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Example wide-form data set with simulated indifference scores</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">ddabcd_data_example_wide</span><span class="op">)</span></span>
<span><span class="co"># Use data from 1st time point</span></span>
<span><span class="va">dtf_wide</span> <span class="op">&lt;-</span> <span class="va">ddabcd_data_example_wide</span> <span class="op"><a href="reference/grapes-index-grapes.html">%index%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span> <span class="st">'1_year_follow_up_y_arm_1'</span>, <span class="st">'eventnames'</span> <span class="op">)</span></span></code></pre></div>
<p>ABCD study data are primarily formatted with separate rows per participant and time point and with multiple columns for each the indifference scores computed at the different delay durations. These data can be converted to long-form data (separate rows for each indifference score at each delay duration). In addition to this conversion, useful quality checks are computed. Indicators are provided for non-missing data, validity checks for irrational responding, whether data met the criteria of <a href="#REF">Johnson &amp; Bickel (2008)</a>, and whether a one-sided Mann-Kendall test for monotonicity was statistically significant.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dtf_long</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/ddabcd_data_prep.html">ddabcd_data_prep</a></span><span class="op">(</span><span class="va">dtf_wide</span><span class="op">)</span></span></code></pre></div>
<p>Once data has been converted to long-form, 3 different models of discounting can be fit to each set of data per participant. Models that are fit are (1) a null model with an intercept only, (2) <a href="#REF">Mazur’s one-parameter (1987)</a> model, and (3) <a href="#REF">Rachlin’s two-parameter (2006)</a> model.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Fit data using non-linear least-squares method</span></span>
<span><span class="va">lst_all_fits.nls</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/ddabcd_fit_models_across_participants.html">ddabcd_fit_models_across_participants</a></span><span class="op">(</span></span>
<span>  <span class="va">dtf_long</span>,</span>
<span>  <span class="va">ddabcd_fit_models_using_nls</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Parameter estimates per participant can be added as a column to an existing data frame to allow for easy analysis of variables that covary with discounting model parameters.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Add discounting rate estimates from Mazur's (1987) model</span></span>
<span><span class="va">dtf_wide</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/ddabcd_post_fit_add_to_data.html">ddabcd_post_fit_add_to_data</a></span><span class="op">(</span> </span>
<span>  <span class="va">dtf_wide</span>, </span>
<span>  <span class="va">lst_all_fits.nls</span>, </span>
<span>  <span class="st">'ddabcd_estimates_M1987_nls.lnk'</span>,</span>
<span>  fun_extract <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="va">x</span> <span class="op"><a href="reference/grapes-pull_coef-grapes.html">%pull_coef%</a></span> <span class="st">'lnk'</span>,</span>
<span>  chr_model <span class="op">=</span> <span class="st">'M1987'</span>,</span>
<span>  lgc_filtering <span class="op">=</span> <span class="va">dtf_wide</span><span class="op">$</span><span class="va">eventname</span> <span class="op">==</span> <span class="st">'1_year_follow_up_y_arm_1'</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Add discounting rate estimates from Rachlin's (2006) model</span></span>
<span><span class="va">dtf_wide</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/ddabcd_post_fit_add_to_data.html">ddabcd_post_fit_add_to_data</a></span><span class="op">(</span> </span>
<span>  <span class="va">dtf_wide</span>, </span>
<span>  <span class="va">lst_all_fits.nls</span>, </span>
<span>  <span class="st">'ddabcd_estimates_R2006_nls.lnk'</span>,</span>
<span>  fun_extract <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="va">x</span> <span class="op"><a href="reference/grapes-pull_coef-grapes.html">%pull_coef%</a></span> <span class="st">'lnk'</span>,</span>
<span>  chr_model <span class="op">=</span> <span class="st">'R2006'</span>,</span>
<span>  lgc_filtering <span class="op">=</span> <span class="va">dtf_wide</span><span class="op">$</span><span class="va">eventname</span> <span class="op">==</span> <span class="st">'1_year_follow_up_y_arm_1'</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Predict discounting rates using biological sex</span></span>
<span><span class="va">lst_pred_of_lnk</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span> <span class="va">ddabcd_estimates_M1987_nls.lnk</span> <span class="op">~</span> <span class="va">sex</span>, data <span class="op">=</span> <span class="va">dtf_wide</span> <span class="op">)</span></span></code></pre></div>
<p>The functions and examples here expand upon original work by <a href="#REF">Kohler, Lichenstein, and Yip (2022)</a>, who described how to fit <a href="#REF">Mazur’s (1987)</a> model to the ABCD study data using the base R function <strong>nls</strong> and reported analyses of how demographic, impulsivity, and substance use risk factor measures covary with the discounting rate parameter.</p>
</div>
<div class="section level3">
<h3 id="REF">References<a class="anchor" aria-label="anchor" href="#REF"></a>
</h3>
<p>Johnson, M. W., &amp; Bickel, W. K. (2008). An algorithm for identifying nonsystematic delay-discounting data. <em>Experimental and Clinical Psychopharmacology</em>, <em>16</em> (3), 264-274. <a href="https://doi.org/10.1037/1064-1297.16.3.264" class="external-link uri">https://doi.org/10.1037/1064-1297.16.3.264</a></p>
<p>Kohler, R. J., Lichenstein, S. D., &amp; Yip, S. W. (2022). Hyperbolic discounting rates and risk for problematic alcohol use in youth enrolled in the Adolescent Brain and Cognitive Development Study. <em>Addiction Biology</em>, <em>27</em> (2), 1-13. <a href="https://doi.org/10.1111/adb.13160" class="external-link uri">https://doi.org/10.1111/adb.13160</a></p>
<p>Luciana, M., Bjork, J., Nagel, B., Barch, D. M., Gonzalex, R., Nixon, S. J., &amp; Banich, M. T. (2018). Adolescent neurocognitive development and impacts of substance use: Overview of the Adolescent Brain Cognitive Development (ABCD) baseline neurocognition battery. <em>Developmental Cognitive Neuroscience</em>, <em>32</em>, 67-79. <a href="https://doi.org/10.1016/j.dcn.2018.02.006" class="external-link uri">https://doi.org/10.1016/j.dcn.2018.02.006</a></p>
<p>Mazur, J. E. (1987). An adjusting procedure for studying delayed reinforcement]. In M. L. Commons, J. E. Mazur, J. A. Nevin, &amp; H. Rachlin (Eds.), <em>The effect of delay and intervening events on reinforcement value</em> (pp. 55-73). Lawrence Erlbaum Associates, Inc.</p>
<p>Rachlin, H. (2006). Notes on discounting. <em>Journal of the Experimental Analysis of Behavior</em>, <em>85</em> (3), 425-435. <a href="https://doi.org/10.1901/jeab.2006.85-05" class="external-link uri">https://doi.org/10.1901/jeab.2006.85-05</a></p>
<p>Saragosa-Harris, N. M., Chaku, N., MacSweeney, N., Williamson, V. G., Scheuplein, M., Feola, B., …, &amp; Mills, K. L. (2022). A practical guide for researchers and reviewers using the ABCD Study and other large longitudinal datasets. <em>Developmental Cognitive Neuroscience</em>, <em>55</em>, 1-11. <a href="https://doi.org/10.1016/j.dcn.2022.101115" class="external-link uri">https://doi.org/10.1016/j.dcn.2022.101115</a></p>
</div>
</div>
  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + License</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing ddabcd</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Kevin Potter <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-3845-0512" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Kevin Potter.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.5.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
